{
  "chunk_index": 2,
  "result": "```markdown\n# 檔案區塊分析\n\n## 基本資訊\n- 檔名: MMBNewLoginViewModel.swift\n- 語言: swift\n- 區塊: 2/6\n- 行數: 199\n\n## 函式一覽\n- saveAccountInfo() [201-205]\n  - 參數: 無\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 修改 `Account.shared()` 的 `uid`、`userId`、`pwd`（全域單例）\n\n- encryptPasswordAndSave(completion: @escaping () -> Void) [207-226]\n  - 參數:\n    - completion: () -> Void required\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 讀取 `inputContent`，設定 `loginModel` 的 `customerID`、`account`、`pwd`，呼叫 RSA 加密（可能涉及 I/O/CPU），最後呼叫 `completion`\n\n- getCurrentQuickLoginType() -> MMBLoginMethodType? [228-242]\n  - 參數: 無\n  - 回傳: MMBLoginMethodType? (optional)\n  - 例外: none\n  - 副作用: 讀取 `MMBLocalStorageModel.sharedInstance()` 與 `UIDevice.isFaceIDSupported()`（唯讀）\n\n- getQuickLoginButtonTitle() -> String [244-260]\n  - 參數: 無\n  - 回傳: String\n  - 例外: none\n  - 副作用: 依據 `getCurrentQuickLoginType()` 取得本地化字串（唯讀）\n\n- getVoiceOversHint() -> String [262-279]\n  - 參數: 無\n  - 回傳: String\n  - 例外: none\n  - 副作用: 依據 `getCurrentQuickLoginType()` 產生語音提示字串（唯讀）\n\n- saveLoginModelByID(statusModel: MMBBankStatusModel) [281-290]\n  - 參數:\n    - statusModel: MMBBankStatusModel required\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 修改 `localStorageLoginModel.preferredLoginType`、發送 `.hiddenQuickLoginButton` 事件、呼叫 `saveAndLogLocalStorageModel`（寫入本地儲存與記錄）\n\n- isInputValid() -> Bool [292-350]\n  - 參數: 無\n  - 回傳: Bool\n  - 例外: none\n  - 副作用: 重設並更新 `inputContent` 各欄位的 UI 狀態（error / normal）\n\n- loginKeyCheck(success: (() -> Void)?) [352-366]\n  - 參數:\n    - success: (() -> Void)? optional\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 若 RSA 金鑰未就緒，導向錯誤頁面、記錄訊息（UI 導航、日誌）\n\n- updateLoginModelAndClearQridIfNeeded(clearQrid: Bool) [368-383]\n  - 參數:\n    - clearQrid: Bool required\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 若 `clearQrid` 為 true，呼叫 `FidoRpImpl.sharedInstance().cleanAllLocalFidoRegData()`；修改 `localStorageLoginModel` 的 `preferredLoginType`、`qrid`，並呼叫 `saveAndLogLocalStorageModel`\n\n- checkLoginManager(loginMethodType: MMBLoginMethodType) [385-392]\n  - 參數:\n    - loginMethodType: MMBLoginMethodType required\n  - 回傳: Void\n  - 例外: none\n  - 副作用: 若 `manager.loginMethodType` 不同，重新建立 `MMBLoginManager` 並呼叫 `bindData()`（可能改變 UI 綁定）\n\n- getLoginMethodAAString() -> String [394-398]\n  - 參數: 無\n  - 回傳: String\n  - 例外: none\n  - 副作用: 讀取 `manager.loginMethodType.loginMethodAAString`（唯讀）\n\n## 外部相依\n- imports:\n  - 無\n\n## 函式關係（區塊內可觀察）\n- getQuickLoginButtonTitle → getCurrentQuickLoginType\n- getVoiceOversHint → getCurrentQuickLoginType\n- saveLoginModelByID → saveAndLogLocalStorageModel (external/unknown)\n- updateLoginModelAndClearQridIfNeeded → saveAndLogLocalStorageModel (external/unknown)\n- checkLoginManager → bindData (external/unknown)\n\n## 摘要\n- 目的: 提供登入畫面的資料處理、驗證、加密與本地儲存管理，並根據不同快速登入類型產生 UI 文本與語音提示。\n- 範圍/邊界: 僅操作 ViewModel 內的模型與單例服務，涉及 UI 狀態更新、加密、以及本地儲存的讀寫，不直接處理網路請求或畫面呈現。\n- 備註（若有重要不確定性）: `saveAndLogLocalStorageModel`、`bindData` 等方法未在本區塊內定義，視為外部/未知實作。\n```",
  "timestamp": 1757928529.1910844
}